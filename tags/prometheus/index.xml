<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Prometheus on</title><link>https://omarghader.github.io/tags/prometheus/</link><description>Recent content in Prometheus on</description><generator>Hugo</generator><language>en-US</language><lastBuildDate>Thu, 10 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://omarghader.github.io/tags/prometheus/index.xml" rel="self" type="application/rss+xml"/><item><title>Detect HTTP Traffic Anomalies in Prometheus Using Z-Score-Based PromQL Alerts</title><link>https://omarghader.github.io/detect-http-traffic-anomalies-in-prometheus-using-z-score-based-promql-alerts/</link><pubDate>Thu, 10 Apr 2025 00:00:00 +0000</pubDate><guid>https://omarghader.github.io/detect-http-traffic-anomalies-in-prometheus-using-z-score-based-promql-alerts/</guid><description>&lt;p>Monitoring HTTP request rates is one of the most basic yet essential tasks in observability. A sudden spike might indicate a traffic surge or even a DDoS attack, while a sudden drop could signal a backend failure. Static thresholds work, but they often miss subtle patterns or raise too many false alarms. A better way is to use statistical anomaly detection—specifically Z-score based alerts in Prometheus.&lt;/p>
&lt;p>In this post, we’ll walk through how to set up a Z-score PromQL alert to detect anomalies in HTTP request rates using only Prometheus and native PromQL.&lt;/p></description></item><item><title>A Full Guide to Monitoring Strategies for Enterprises</title><link>https://omarghader.github.io/monitoring-strategy-enterprise/</link><pubDate>Sun, 22 Oct 2023 20:59:01 +0200</pubDate><guid>https://omarghader.github.io/monitoring-strategy-enterprise/</guid><description>&lt;p>Monitoring, stop being blind!&lt;/p>
&lt;p>After 3 years working in the monitoring team at the one of the biggest videogames company, I will unveil some secrets and strategies of monitoring for enterprises. These strategies can be applied to small or big companies depending on their context and uses.&lt;/p>
&lt;p>But &lt;strong>what is monitoring?&lt;/strong> Monitoring is the fact of collecting information about an entity (application, machine, URL&amp;hellip;) on a frequent basis. In general, this raw data is passed through visualization apps to give a visibility on the enterprise entities. Then, one of the end goals is to create alerts based on this data to detect or anticipate abnormal behaviors.&lt;/p></description></item><item><title>Vmalert: Revamp your Prometheus alert with microservices</title><link>https://omarghader.github.io/vmalert-setup/</link><pubDate>Thu, 28 Sep 2023 08:14:23 +0200</pubDate><guid>https://omarghader.github.io/vmalert-setup/</guid><description>&lt;p>Vmalert: the prometheus alerting microservice&lt;/p>
&lt;p>While collecting metrics is important for monitoring, the real end goal is not visualizing the data. The most critical goal of metrics is to create alerts in case of bad behaviors or incidents. In the Prometheus world, prometheus itself generates alerts based on the metrics collected.&lt;/p>
&lt;p>Let&amp;rsquo;s discover another product of VictoriaMetrics called &lt;a href="https://docs.victoriametrics.com/vmalert.html">Vmalert&lt;/a>. To be honest, Vmalert is not a revolutionary product, exactly like &lt;a href="https://omarghader.github.io/prometheus-duplicate-remotewrite/">Vmagent&lt;/a>, but its strength is the ability to do 1 role: handling alerts with the minimum resources.&lt;/p></description></item><item><title>How to send duplicate RemoteWrite metrics</title><link>https://omarghader.github.io/prometheus-duplicate-remotewrite/</link><pubDate>Mon, 25 Sep 2023 08:14:23 +0200</pubDate><guid>https://omarghader.github.io/prometheus-duplicate-remotewrite/</guid><description>&lt;p>When working with metrics, you may want to send the metrics you&amp;rsquo;ve collected to 2 different prometheus instances for backup. Despite that a &lt;a href="https://prometheus.io/docs/practices/remote_write/">feature in Prometheus&lt;/a> allows you send the metrics received to another prometheus, it&amp;rsquo;s not recommended to do that when working with high amounts of metrics.&lt;/p>
&lt;p>Indeed, Prometheus consumes a lot of resources to do the remotewrite and this may reduce its capability to perform well. But other solution exists : lightweight, simple and works perfectly.&lt;/p></description></item><item><title>Grafana 9 Alert : How to customize alert message</title><link>https://omarghader.github.io/grafana-alerting-custom-message/</link><pubDate>Sat, 05 Nov 2022 11:09:41 +0100</pubDate><guid>https://omarghader.github.io/grafana-alerting-custom-message/</guid><description>&lt;p>Grafana added the alert feature recently and it&amp;rsquo;s now released with the Grafana 9. That&amp;rsquo;s a great feature for the people who don&amp;rsquo;t want to set a proper alermanager and to configure it. I&amp;rsquo;ve took the time to explore the alert and play with it. Let&amp;rsquo;s see how it works!&lt;/p>
&lt;h2 id="deploy-grafana-and-prometheus">Deploy grafana and prometheus&lt;/h2>
&lt;p>With the docker-compose file below run the grafana and prometheus &lt;code>docker-compose up -d&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># docker-compose.yml file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3.5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">prometheus&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">quay.io/prometheus/prometheus:latest&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#- ./prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">prometheus:/prometheus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#command: &amp;#34;--config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/prometheus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">9090&lt;/span>:&lt;span style="color:#ae81ff">9090&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">grafana&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">grafana/grafana:latest&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;3000:3000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">grafana-storage:/var/lib/grafana&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">prometheus&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">prometheus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">grafana-storage&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">grafana-storage&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-your-alert">Build your alert&lt;/h2>
&lt;p>I have 2 websites running on a raspberrypi. In my case, I would like to know when the website is down and to get notified with the website name.&lt;/p></description></item><item><title>Monitor your applications easily with Grafana and Prometheus</title><link>https://omarghader.github.io/monitor-your-applications-easily-with-grafana-and-prometheus/</link><pubDate>Wed, 01 May 2019 00:00:00 +0000</pubDate><guid>https://omarghader.github.io/monitor-your-applications-easily-with-grafana-and-prometheus/</guid><description>&lt;h2 id="1-what-is-prometheus--grafana">1. What is Prometheus &amp;amp; Grafana?&lt;/h2>
&lt;ul>
&lt;li>Prometheus is a monitoring system which collects metrics from applications easily.&lt;/li>
&lt;li>Grafana is a user-friendly visualization project which transforms the metrics collected before into amazing charts.&lt;/li>
&lt;/ul>
&lt;p>In this article, you will learn how to connect prometheus to grafana using a docker compose file.&lt;/p>
&lt;h2 id="2-requirements">2. Requirements&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://omarghader.github.io/introduction-to-docker/">Install docker&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://omarghader.github.io/docker-compose-tutorial/">Install docker compose&lt;/a>&lt;/li>
&lt;li>Golang &amp;gt;= 1.08&lt;/li>
&lt;/ul>
&lt;h2 id="3-create-your-application">3. Create your application&lt;/h2>
&lt;p>If you want to get metrics from your application, the first step is to add prometheus to your application code. In this tutorial, we will use the example written on &lt;a href="https://prometheus.io/docs/guides/go-application/">prometheus docs&lt;/a>.&lt;/p></description></item></channel></rss>