<!doctype html><html lang=en-us><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/omarghader.github.io\/"},"articleSection":"post","name":"Vmalert: Revamp your Prometheus alert with microservices","headline":"Vmalert: Revamp your Prometheus alert with microservices","description":" Configure and run a prometheus vmalert with alertmanager. ","inLanguage":"en-US","author":"Omar Ghader","creator":"Omar Ghader","publisher":"Omar Ghader","accountablePerson":"map[]","copyrightHolder":"map[]","copyrightYear":"2023","datePublished":"2023-09-28T08:14:23+02:00","dateModified":"2023-09-28T08:14:23+02:00","url":"https:\/\/omarghader.github.io\/vmalert-setup\/","wordCount":"1298","image":"https:\/\/omarghader.github.io\//img/logo.png","keywords":["prometheus","monitoring","observability","victoriametrics","prometheus","monitoring","observability","victoriametrics","Blog"]}</script><script>var _mtm=window._mtm=window._mtm||[];_mtm.push({"mtm.startTime":(new Date).getTime(),event:"mtm.Start"}),function(){var b=document,a=b.createElement("script"),c=b.getElementsByTagName("script")[0];a.async=!0,a.src="https://omarghader.com/matomo/js/container_JgixlzJl.js",c.parentNode.insertBefore(a,c)}()</script><title>Vmalert: Revamp your Prometheus alert with microservices &#183;</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://omarghader.github.io/favicon.ico><link rel=canonical href=https://omarghader.github.io/vmalert-setup/><meta name=description content="Configure and run a prometheus vmalert with alertmanager."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1624060798683-144bad071963?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"><meta name=twitter:title content="Vmalert: Revamp your Prometheus alert with microservices"><meta name=twitter:description content="Configure and run a prometheus vmalert with alertmanager."><meta name=twitter:url content="https://omarghader.github.io/vmalert-setup/"><meta name=twitter:site content="@"><meta property="og:site_name" content><meta property="og:title" content="Vmalert: Revamp your Prometheus alert with microservices &#183; Omar Ghader"><meta property="og:url" content="https://omarghader.github.io/vmalert-setup/"><meta property="og:type" content="article"><meta property="og:description" content="Configure and run a prometheus vmalert with alertmanager."><meta property="article:published_time" content="2023-09-28T08:14:23+02:00"><meta property="article:tag" content="prometheus"><meta property="article:tag" content="monitoring"><meta property="article:tag" content="observability"><meta property="article:tag" content="victoriametrics"><meta property="og:image" content="https://images.unsplash.com/photo-1624060798683-144bad071963?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"><meta name=generator content="Hugo 0.85.0"><link rel=stylesheet type=text/css href=https://omarghader.github.io/built/screen.css><link rel=stylesheet type=text/css href=https://omarghader.github.io/css/casper-two.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://omarghader.github.io/css/custom.css></head><body class=post-template><div class=site-wrapper><header class="site-header outer"><div class=inner><nav class=site-nav><div class=site-nav-left><a class=site-nav-logo href=#><img src=https://omarghader.github.io/img/logo.png alt="Omar Ghader"></a><ul class=nav role=menu><li role=menuitem><a href=https://omarghader.github.io/>Home</a></li><li role=menuitem><a href=https://omarghader.github.io/about>About</a></li><li role=menuitem><a href=https://www.linkedin.com/in/marc-ghader/>Contact</a></li><li role=menuitem><a href=https://eepurl.com/h6jxnr>Newsletter</a></li></ul></div><div class=site-nav-right><div class=social-links><a class=social-link href=https://github.com/omarghader target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></nav></div></header><main id=site-main class="site-main outer" role=main><div class=inner><article class="post-full post"><header class=post-full-header><section class=post-full-meta><time class=post-full-meta-date datetime=2023-09-28>28 September 2023</time>
<span class=date-divider>/</span> <a href=https://omarghader.github.io/tags/prometheus/>#prometheus</a>&nbsp;<a href=https://omarghader.github.io/tags/monitoring/>#monitoring</a>&nbsp;</section><h1 class=post-full-title>Vmalert: Revamp your Prometheus alert with microservices</h1></header><figure class=post-full-image style="background-image:url(https://images.unsplash.com/photo-1624060798683-144bad071963?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80)"></figure><section class=post-full-content><div class=kg-card-markdown><p>Vmalert: the prometheus alerting microservice</p><p>While collecting metrics is important for monitoring, the real end goal is not visualizing the data. The most critical goal of metrics is to create alerts in case of bad behaviors or incidents. In the Prometheus world, prometheus itself generates alerts based on the metrics collected.</p><p>Let&rsquo;s discover another product of VictoriaMetrics called <a href=https://docs.victoriametrics.com/vmalert.html>Vmalert</a>. To be honest, Vmalert is not a revolutionary product, exactly like <a href=https://omarghader.github.io/prometheus-duplicate-remotewrite/>Vmagent</a>, but its strength is the ability to do 1 role: handling alerts with the minimum resources.</p><h2 id=the-problem>The problem</h2><p>While prometheus is an awesome product, it has 1 default. It&rsquo;s not scalable. If you have used monitoring in prod, you know that the number of metrics is always increasing. Ok, but what is the problem? The problem is that more metrics means more resources, which is not unlimited. While you cannot create replicas of prometheus to split the load, it&rsquo;s always better to use prometheus for 1 task: metrics database.</p><h2 id=the-solution>The solution</h2><p>Moving the alerts handling to a separate outsider microservice, it&rsquo;s a better solution IMHO. You can reduce the load on prometheus, but also you can switch the prometheus datasource easily, or use multiple prometheus as datasource for your alerts.</p><p>Like <a href=https://omarghader.github.io/prometheus-duplicate-remotewrite/>vmagent</a>, [Vmalert] is lightweight microservice that has 1 job: handling alerts and sending them to alertmanagers.</p><h2 id=how-to-deploy-it>How to deploy it</h2><p>let&rsquo;s configure a vmalert connected to a victoriametrics server. You can do the same with prometheus.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># docker-compose.yml</span>
<span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3.5&#34;</span>

<span style=color:#f92672>services</span>:
  <span style=color:#f92672>vmalert</span>:
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>vmalert</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>victoriametrics/vmalert:v1.93.4</span>
    <span style=color:#f92672>depends_on</span>:
      - <span style=color:#e6db74>&#34;victoriametrics&#34;</span>
      - <span style=color:#e6db74>&#34;alertmanager&#34;</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>8880</span>:<span style=color:#ae81ff>8880</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./alerts.yml:/etc/alerts/alerts.yml</span>
    <span style=color:#f92672>command</span>:
      - <span style=color:#e6db74>&#34;--datasource.url=http://victoriametrics:8428/&#34;</span> <span style=color:#75715e># Read the metrics</span>
      - <span style=color:#e6db74>&#34;--remoteRead.url=http://victoriametrics:8428/&#34;</span> <span style=color:#75715e># Read the alerts saved</span>
      - <span style=color:#e6db74>&#34;--remoteWrite.url=http://victoriametrics:8428/&#34;</span> <span style=color:#75715e># Write the alerts state</span>
      - <span style=color:#e6db74>&#34;--notifier.url=http://alertmanager:9093/&#34;</span>
      - <span style=color:#e6db74>&#34;--rule=/etc/alerts/*.yml&#34;</span>
      <span style=color:#75715e># display source of alerts in grafana</span>
      - <span style=color:#e6db74>&#34;--external.url=http://127.0.0.1:3000&#34;</span> <span style=color:#75715e>#grafana outside container</span>
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>

  <span style=color:#f92672>victoriametrics</span>:
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>victoriametrics</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>victoriametrics/victoria-metrics</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>8428</span>:<span style=color:#ae81ff>8428</span>
    <span style=color:#f92672>command</span>:
      - <span style=color:#e6db74>&#34;--httpListenAddr=:8428&#34;</span>

  <span style=color:#f92672>alertmanager</span>:
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>alertmanager</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>prom/alertmanager:v0.25.0</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./alertmanager.yml:/config/alertmanager.yml</span>
    <span style=color:#f92672>command</span>:
      - <span style=color:#e6db74>&#34;--config.file=/config/alertmanager.yml&#34;</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>9093</span>:<span style=color:#ae81ff>9093</span>
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</code></pre></div><h3 id=config-files>Config files</h3><p>Exactly like prometheus and alertmanager, Vmalert and alertmanager needs both a configuration file at least to work. Note that vmalert understands perfectly the prometheus alerting synthax, but also has more features that you can check in <a href=https://docs.victoriametrics.com/vmalert.html>their docs</a>.</p><p>In the same directory as docker-compose.yml, create the 2 following files.</p><p><strong>alert.yml</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># alert.yml</span>

<span style=color:#75715e># File contains default list of alerts for VictoriaMetrics single server.</span>
<span style=color:#75715e># The alerts below are just recommendations and may require some updates</span>
<span style=color:#75715e># and threshold calibration according to every specific setup.</span>
<span style=color:#f92672>groups</span>:
  <span style=color:#75715e># Alerts group for VM single assumes that Grafana dashboard</span>
  <span style=color:#75715e># https://grafana.com/grafana/dashboards/10229 is installed.</span>
  <span style=color:#75715e># Pls update the `dashboard` annotation according to your setup.</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>testAlerts</span>
    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>30s</span>
    <span style=color:#f92672>concurrency</span>: <span style=color:#ae81ff>2</span>
    <span style=color:#f92672>rules</span>:
      - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>DiskRunsOutOfSpaceIn3Days</span>
        <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>up == 0</span>
        <span style=color:#f92672>for</span>: <span style=color:#ae81ff>5m</span>
        <span style=color:#f92672>labels</span>:
          <span style=color:#f92672>severity</span>: <span style=color:#ae81ff>critical</span>
        <span style=color:#f92672>annotations</span>:
          <span style=color:#f92672>dashboard</span>: <span style=color:#e6db74>&#34;http://localhost:3000/d/wNf0q_kZk?viewPanel=73&amp;var-instance={{ $labels.instance }}&#34;</span> <span style=color:#75715e># This is a fake link</span>
          <span style=color:#f92672>summary</span>: <span style=color:#e6db74>&#34;Instance {{ $labels.instance }} is down&#34;</span>
          <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Instance is down, please check it&#34;</span>
</code></pre></div><p><strong>alertmanager.yml</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#75715e># alertmanager.yml</span>

<span style=color:#f92672>route</span>:
  <span style=color:#f92672>receiver</span>: <span style=color:#ae81ff>blackhole</span>

<span style=color:#f92672>receivers</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>blackhole</span>
</code></pre></div><style>.subscribe{margin:16px 0;width:100%;max-width:500px;background-color:#fff;border-radius:1rem;padding:2rem .5rem;text-align:center}.subscribe h2{margin:0 0 1rem;text-align:left}.mailchimp-embedded-subscribe{margin-top:24px}.subscribe p{margin:0 0 1rem;text-align:left}input{padding:.8rem 2rem;width:90%;margin-bottom:16px;border-radius:1rem;outline:none;border:.1rem solid #d1d1d1;text-align:center}::placeholder{color:#d1d1d1}.subscribe-btn{width:200px;margin-top:8px;padding:1rem 2rem;border-radius:5rem;background:#f33139;color:#fff;border:none;outline:none;cursor:pointer}.subscribe-subtitle{font-size:.8em;font-weight:lighter;font-style:italic;margin-bottom:24px}.download-pdf{color:#fff!important;background-color:#de4242;border-radius:28px;border:1px solid #de1d1d;display:inline-block;cursor:pointer;color:#fff;font-family:Arial;font-size:1em;padding:16px 31px;text-decoration:none}.download-pdf:hover{background-color:#c72323}.download-pdf:active{position:relative;top:1px}.modal{visibility:hidden;opacity:0;position:fixed;z-index:3;left:0;top:0;width:100vw;height:100vh;background-color:#000;background-color:rgba(0,0,0,.4);justify-content:center;align-items:center;transition:visibility .3s linear,opacity .3s linear}.modal-content{background-color:#fefefe;margin:80px auto;padding:20px;border:1px solid #888;width:80%;max-width:1000px;height:auto;display:flex}.modal-content .left{flex:1;display:flex;align-items:center;justify-content:center}.modal-content .right{display:flex;align-items:center;justify-content:center}.right img{width:250px}.close{float:right;color:#aaa;font-size:28px;font-weight:700;position:relative;order:4}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.subscription-success{align-items:center;justify-content:center;flex-direction:column}.book,.book:before,.book:after{box-sizing:inherit}.book:before,.book:after{content:"";position:absolute}.book{display:flex;justify-content:center;align-items:center;width:280px;height:auto;background:#f33139;border-radius:20px 16px 12px 32px;background-image:linear-gradient( to right,#d11f2f 48px,#ba0716 50px,transparent 50px )}.book::after{height:52px;width:274px;bottom:6px;right:0;background:#fff;border-radius:32px 4px 4px 32px;box-shadow:inset 4px 6px #e4e0ce;background-image:linear-gradient( to bottom,transparent 6px,#e4e0ce 8px,transparent 8px,transparent 12px,#e4e0ce 12px,transparent 14px,transparent 18px,#e4e0ce 18px,transparent 20px,transparent 24px,#e4e0ce 24px,transparent 26px,transparent 30px,#e4e0ce 30px,transparent 32px,transparent 36px,#e4e0ce 36px,transparent 38px,transparent 42px,#e4e0ce 42px,transparent 44px,transparent 48px,#e4e0ce 48px,transparent 50px )}.book::before{height:20px;width:160px;right:40px;top:72px;background:#d11f2f;border-radius:20px;box-shadow:0 36px #d11f2f}.book-content{color:#fff;font-size:1em;font-weight:700;margin-left:1em}@media only screen and (max-width:600px){.modal{overflow:auto}.modal-content{flex-direction:column}.close{order:-1;margin-left:auto}}</style><div id=popup-mail></div><div id=popup class=modal><div class=modal-content><span class=close>&#215;</span><div class=left><div class=subscribe id=mc-embedded-subscribe-form><h2>Stop wasting your time !</h2><p>Each holiday, <strong>you decide</strong> to make a smart home
project. But each holiday, you spend hours on finding an interesting
project to do.</p><p>Don't worry, <strong>I can help you</strong> ! Join my community to
receive the newest DIY projects periodically.</p><iframe name=dummyframe id=dummyframe style=display:none></iframe><form class=mailchimp-embedded-subscribe action=https://omarghader.com/webhook/subscribe/newsletter/omarghader method=post target=dummyframe><input type=hidden value=esp32 name=tag required>
<input class=input type=email name=email placeholder="Write your email" required><br><input class=subscribe-btn type=submit value="I'm In" name=submit id=mc-embedded-subscribe></form><p class=subscribe-subtitle>Promise! No spam, your email is kept private</p></div></div><div class=right><div class=book-image><img src=https://omarghader.github.io/img/esp32.png></div></div></div></div><script>var ismodalDisplayed=!1,isSubscribed=localStorage.getItem("subscribedToNewsletter"),modal=document.getElementById("popup"),span=document.getElementsByClassName("close")[0],mc1Submitted,signUpForm;function closeModal(){modal.style.opacity="0",modal.style.visibility="hidden",localStorage.setItem("subscribedToNewsletter","false"),!window.gtag||gtag("event","mail_popup_close",{event_category:"mail",event_label:"esp32_diy"})}span.onclick=closeModal,window.onclick=function(a){a.target==modal&&closeModal()};const dEl=document.documentElement,popupAnchor=document.getElementById("popup-mail"),popup=document.getElementById("popup");function onScroll(){const b=dEl.scrollTop,a=popupAnchor.getBoundingClientRect().top;if(window.innerHeight>=a&!ismodalDisplayed){ismodalDisplayed=!0,setTimeout(()=>{modal.style.visibility="visible",modal.style.opacity="1",!window.gtag||gtag("event","mail_popup_open",{event_category:"mail",event_label:"esp32_diy"})},0);return}}isSubscribed==null&&window.addEventListener("scroll",onScroll),mc1Submitted=!1,signUpForm=document.getElementById("mc-embedded-subscribe-form");function onsubmit(){localStorage.setItem("subscribedToNewsletter","true")}isSubscribed!=="true"&&signUpForm.addEventListener("submit",function(a){closeModal(),onsubmit(),!window.gtag||gtag("event","mail_subscribe",{event_category:"subscribe",event_label:"esp32_diy"})})</script><h3 id=run-the-stack>Run the stack</h3><p>Run the following command</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ docker compose up -d
</code></pre></div><h2 id=test>Test</h2><p>After the stack is up and running, go to vmalert at http://localhost:8880. Vmalert offers a basic UI that list the alerts occuring and the different information about the alert.</p><p><img src=https://omarghader.github.io/img/vmalert-ui.png alt="Vmalert UI"></p><p>Once you have an alert in vmalert UI (or API), you can also check that alertmanager http://localhost:9093 has received this alert as well.</p><h2 id=conclusion>Conclusion</h2><p>Arrivng to the conclustion of this article, if the alerting configuration is the same, so why not using more lightweight microservices? It&rsquo;s been 3 years that I&rsquo;m working with VictoriaMetrics components, and i can confirm how resilient and robust they are honestly.</p><p>If you need my help, feel free to <a href=https://www.linkedin.com/in/marc-ghader>contact me</a> for a short or long term contract.</p><p>Don&rsquo;t hesitate to <strong>leave a comment</strong> if you got any problem, or say simply a thanks for the tutorials.</p></div><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=auto data-full-width-responsive=true data-ad-client=ca-pub-2980078129213070 data-ad-slot></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></section><footer class=post-full-footer><section class=author-card><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author><section class=author-card-content><h4 class=author-card-name><a href=https://omarghader.github.io/>Omar Ghader</a></h4><p>Monitoring, DevOps and SmartHome</p></section></section></footer></article></div></main><aside class="read-next outer"><div class=inner><div class=read-next-feed><article class=read-next-card style=background-image:url(https://omarghader.github.io/img/blog-cover.jpg)><header class=read-next-card-header><small class=read-next-card-header-sitetitle>&mdash; Omar Ghader &mdash;</small><h3 class=read-next-card-header-title><a href=https://omarghader.github.io/tags/prometheus/>#prometheus</a></h3></header><div class=read-next-divider><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg></div><div class=read-next-card-content><ul><li><a href=https://omarghader.github.io/esp32-am312-pir-motion-sensor/>ESP32 AM312 motion sensor automation</a></li><li><a href=https://omarghader.github.io/control-ir-ac-esp32-home-assistant/>Control an IR Remote AC Using ESP32 and Home Assistant</a></li><li><a href=https://omarghader.github.io/how-to-center-a-element-inside-div-with-css/>How to center a element inside div with css</a></li><li><a href=https://omarghader.github.io/esp32-dht22-temperature-humidity-sensor/>Esp32 + 1$ DHT22 temperature sensor</a></li></ul></div><footer class=read-next-card-footer><a href=https://omarghader.github.io/tags/prometheus/>See all related posts →</a></footer></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/monitoring-strategy-enterprise/><div class=post-card-image style="background-image:url(https://images.unsplash.com/photo-1590856029826-c7a73142bbf1?auto=format&fit=crop&q=80&w=1473&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)"></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/monitoring-strategy-enterprise/><header class=post-card-header><span class=post-card-tags>#monitoring
#observability
#prometheus
#victoriametrics
#tracing
#logs</span><h2 class=post-card-title>A Full Guide to Monitoring Strategies for Enterprises</h2></header><section class=post-card-excerpt><p>Why monitoring is mandatory for enterprises? Simply, it&rsquo;s the eyes through which the enterprise can see what&rsquo;s going on her apps and network.</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/prometheus-duplicate-remotewrite/><div class=post-card-image style=background-image:url(https://docs.victoriametrics.com/logo.png)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/prometheus-duplicate-remotewrite/><header class=post-card-header><span class=post-card-tags>#prometheus
#monitoring
#observability
#victoriametrics</span><h2 class=post-card-title>How to send duplicate RemoteWrite metrics</h2></header><section class=post-card-excerpt><p>Duplicate metrics and send them to 2 different prometheus instances using remote write in vmagent.</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article></div></div></aside><div class=floating-header><div class=floating-header-logo><a href=https://omarghader.github.io/><img src=https://omarghader.github.io/img/logo.png alt>
<span></span></a></div><span class=floating-header-divider>&mdash;</span><div class=floating-header-title>Vmalert: Revamp your Prometheus alert with microservices</div><div class=floating-header-share><div class=floating-header-share-label>Share this<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 15.5V4a1.5 1.5.0 113 0v4.5h2a1 1 0 011 1h2a1 1 0 011 1H18a1.5 1.5.0 011.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2.0 011.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg></div><a class=floating-header-share-tw href="https://twitter.com/share?text=Vmalert%3a%20Revamp%20your%20Prometheus%20alert%20with%20microservices&url=https%3a%2f%2fomarghader.github.io%2fvmalert-setup%2f" onclick="return window.open(this.href,'share-twitter','width=550,height=235'),!1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class=floating-header-share-fb href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fomarghader.github.io%2fvmalert-setup%2f" onclick="return window.open(this.href,'share-facebook','width=580,height=296'),!1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86.0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a></div><progress class=progress value=0><div class=progress-container><span class=progress-bar></span></div></progress></div><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=line-height:1.3em><a href=https://omarghader.github.io/>omarghader</a><br></section><nav class=site-footer-nav><a href=https://omarghader.github.io/>Latest Posts</a>
<a href=https://github.com/omarghader target=_blank rel=noopener>Github</a></nav></div></footer></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script type=text/javascript src=//code.jquery.com/jquery-3.2.1.min.js></script><script type=text/javascript src=https://omarghader.github.io/js/jquery.fitvids.js></script><script>hljs.initHighlightingOnLoad()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SMB08YT14H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-SMB08YT14H')</script><script>$(document).ready(function(){var j=$(".post-full-content"),g,d,e,b,f,c,a;j.fitVids(),g=document.querySelector('progress'),d=document.querySelector('.floating-header'),e=document.querySelector('.post-full-title'),b=window.scrollY,f=window.innerHeight,c=$(document).height(),a=!1;function k(){b=window.scrollY,h()}function l(){f=window.innerHeight,c=$(document).height(),h()}function h(){a||requestAnimationFrame(i),a=!0}function i(){var h=e.getBoundingClientRect().top+window.scrollY,i=e.offsetHeight+35,j=c-f;b>=h+i?d.classList.add('floating-active'):d.classList.remove('floating-active'),g.setAttribute('max',j),g.setAttribute('value',b),a=!1}window.addEventListener('scroll',k,{passive:!0}),window.addEventListener('resize',l,!1),i()})</script></body></html>