<!doctype html><html lang=en-us><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/omarghader.github.io\/"},"articleSection":"post","name":"Go strings manipulation: Optimize performance x100","headline":"Go strings manipulation: Optimize performance x100","description":" Increase the performance of the string manipulation with golang using some tips that makes your program faster and optimized ","inLanguage":"en-US","author":"Omar Ghader","creator":"Omar Ghader","publisher":"Omar Ghader","accountablePerson":"map[]","copyrightHolder":"map[]","copyrightYear":"2022","datePublished":"2022-10-30T08:57:23+02:00","dateModified":"2022-10-30T08:57:23+02:00","url":"https:\/\/omarghader.github.io\/golang-strings-manipulation-optimization-performance\/","wordCount":"618","image":"https:\/\/omarghader.github.io\//img/logo.png","keywords":["go","golang","go","golang","string manipulation","go string manipulation","performance","optimize","string optimization","faster","Blog"]}</script><script>var _mtm=window._mtm=window._mtm||[];_mtm.push({"mtm.startTime":(new Date).getTime(),event:"mtm.Start"}),function(){var b=document,a=b.createElement("script"),c=b.getElementsByTagName("script")[0];a.async=!0,a.src="https://omarghader.com/matomo/js/container_JgixlzJl.js",c.parentNode.insertBefore(a,c)}()</script><title>Go strings manipulation: Optimize performance x100 &#183;</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://omarghader.github.io/favicon.ico><link rel=canonical href=https://omarghader.github.io/golang-strings-manipulation-optimization-performance/><meta name=description content="Increase the performance of the string manipulation with golang using some tips that makes your program faster and optimized"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://go.dev/images/gophers/motorcycle.svg"><meta name=twitter:title content="Go strings manipulation: Optimize performance x100"><meta name=twitter:description content="Increase the performance of the string manipulation with golang using some tips that makes your program faster and optimized"><meta name=twitter:url content="https://omarghader.github.io/golang-strings-manipulation-optimization-performance/"><meta name=twitter:site content="@"><meta property="og:site_name" content><meta property="og:title" content="Go strings manipulation: Optimize performance x100 &#183; Omar Ghader Blog"><meta property="og:url" content="https://omarghader.github.io/golang-strings-manipulation-optimization-performance/"><meta property="og:type" content="article"><meta property="og:description" content="Increase the performance of the string manipulation with golang using some tips that makes your program faster and optimized"><meta property="article:published_time" content="2022-10-30T08:57:23+02:00"><meta property="article:tag" content="go"><meta property="article:tag" content="golang"><meta property="og:image" content="https://go.dev/images/gophers/motorcycle.svg"><meta name=generator content="Hugo 0.85.0"><link rel=stylesheet type=text/css href=https://omarghader.github.io/built/screen.css><link rel=stylesheet type=text/css href=https://omarghader.github.io/css/casper-two.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://omarghader.github.io/css/custom.css></head><body class=post-template><div class=site-wrapper><header class="site-header outer"><div class=inner><nav class=site-nav><div class=site-nav-left><a class=site-nav-logo href=#><img src=https://omarghader.github.io/img/logo.png alt="Omar Ghader Blog"></a><ul class=nav role=menu><li role=menuitem><a href=https://omarghader.github.io/>Home</a></li><li role=menuitem><a href=https://omarghader.github.io/about>About</a></li><li role=menuitem><a href=https://www.linkedin.com/in/marc-ghader/>Contact</a></li><li role=menuitem><a href=https://eepurl.com/h6jxnr>Newsletter</a></li></ul></div><div class=site-nav-right><div class=social-links><a class=social-link href=https://github.com/omarghader target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></nav></div></header><main id=site-main class="site-main outer" role=main><div class=inner><article class="post-full post"><header class=post-full-header><section class=post-full-meta><time class=post-full-meta-date datetime=2022-10-30>30 October 2022</time>
<span class=date-divider>/</span> <a href=https://omarghader.github.io/tags/go/>#go</a>&nbsp;<a href=https://omarghader.github.io/tags/golang/>#golang</a>&nbsp;</section><h1 class=post-full-title>Go strings manipulation: Optimize performance x100</h1></header><figure class=post-full-image style=background-image:url(https://go.dev/images/gophers/motorcycle.svg)></figure><section class=post-full-content><div class=kg-card-markdown><p>Optimization, faster, better&mldr; these words are always what we search for on google to make our programs more performant.</p><p>In a recent project I&rsquo;ve worked on, the optimization was the main focus. While string manipulation could not be your issue if your program process few words, my project was processing millions of strings per second. Thus, each nanosecond counts!</p><p>The tips below are the fruit of 2 months of work. These tips may not all fit your needs, test them all and choose what fits your code more.</p><h2 id=1-measure-the-time>1. Measure the time</h2><p>You can&rsquo;t even talking about optimization and time reduction if you don&rsquo;t know how many time is your fuction(s) taking. Add a timer around each string manipulation function to measure. Example: <a href=https://prometheus.io/docs/concepts/metric_types/#histogram>prometheus timer</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;math/rand&#34;</span>
	<span style=color:#e6db74>&#34;time&#34;</span>

	<span style=color:#e6db74>&#34;github.com/prometheus/client_golang/prometheus&#34;</span>
)

<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>requestDuration</span> = <span style=color:#a6e22e>prometheus</span>.<span style=color:#a6e22e>NewHistogram</span>(<span style=color:#a6e22e>prometheus</span>.<span style=color:#a6e22e>HistogramOpts</span>{
	<span style=color:#a6e22e>Name</span>:    <span style=color:#e6db74>&#34;my_request_duration&#34;</span>,
	<span style=color:#a6e22e>Help</span>:    <span style=color:#e6db74>&#34;the duration of my function&#34;</span>,
	<span style=color:#a6e22e>Buckets</span>: <span style=color:#a6e22e>prometheus</span>.<span style=color:#a6e22e>LinearBuckets</span>(<span style=color:#ae81ff>0.01</span>, <span style=color:#ae81ff>0.01</span>, <span style=color:#ae81ff>10</span>),
})

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>MeasureTime</span>() {
	<span style=color:#a6e22e>timer</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>prometheus</span>.<span style=color:#a6e22e>NewTimer</span>(<span style=color:#a6e22e>requestDuration</span>)
	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>timer</span>.<span style=color:#a6e22e>ObserveDuration</span>()

	<span style=color:#75715e>// Do something here that takes time.
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>DoMyStringManipulationHere</span>()
}

</code></pre></div><h2 id=2-dont-use-regex>2. DON&rsquo;T use regex</h2><p>Avoid regex as much as possible. Regex is a huge time consumer, and can take milliseconds sometimes. You can do the same result with less than microsecond by writing your own logic of string manipulations.</p><h3 id=benchmark>Benchmark</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkStringNoRegex</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#a6e22e>myblogurl</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;https://omarghader.github.io/&#34;</span>
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#75715e>// check if the string starts with http or https
</span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>HasPrefix</span>(<span style=color:#a6e22e>myblogurl</span>, <span style=color:#e6db74>&#34;http&#34;</span>) <span style=color:#f92672>&amp;&amp;</span> !<span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>HasPrefix</span>(<span style=color:#a6e22e>myblogurl</span>, <span style=color:#e6db74>&#34;https&#34;</span>) {
			<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;string doesn&#39;t start with http or https&#34;</span>)
		}
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkStringRegex</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#a6e22e>myblogurl</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;https://omarghader.github.io/&#34;</span>
	<span style=color:#a6e22e>regex</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>regexp</span>.<span style=color:#a6e22e>MustCompile</span>(<span style=color:#e6db74>&#34;http[s]?&#34;</span>)
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#75715e>// check if the string starts with http or https
</span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>regex</span>.<span style=color:#a6e22e>MatchString</span>(<span style=color:#a6e22e>myblogurl</span>) {
			<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;regex doesn&#39;t match the url&#34;</span>)
		}
	}
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ GO111MODULE<span style=color:#f92672>=</span>off go test -bench<span style=color:#f92672>=</span>. stringregex_test.go
goos: linux
goarch: amd64
cpu: Intel<span style=color:#f92672>(</span>R<span style=color:#f92672>)</span> Core<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> i7-4510U CPU @ 2.00GHz
BenchmarkStringNoRegex-4        <span style=color:#ae81ff>1000000000</span>               0.3279 ns/op
BenchmarkStringRegex-4          <span style=color:#ae81ff>10190110</span>               116.0 ns/op
PASS
ok      command-line-arguments  2.454s
</code></pre></div><h2 id=3-string-replacer>3. String replacer</h2><p>If you want to replace more than 2 words, use the string replacer.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>NewReplacer</span>(<span style=color:#e6db74>&#34;old1&#34;</span>, <span style=color:#e6db74>&#34;new1&#34;</span>, <span style=color:#e6db74>&#34;old2&#34;</span>, <span style=color:#e6db74>&#34;new2&#34;</span>)
</code></pre></div><h2 id=4-use-a-string-builder>4. Use a string builder</h2><p>If you want to concatenate string, use a string builder that has this job. Sometimes, the stringbuilder is not very efficient if you concatenate a small amount of words.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sb</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Builder</span>

    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>1000</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
        <span style=color:#a6e22e>sb</span>.<span style=color:#a6e22e>WriteString</span>(<span style=color:#e6db74>&#34;a&#34;</span>)
    }

    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sb</span>.<span style=color:#a6e22e>String</span>())
}
</code></pre></div><h3 id=benchmark-1>Benchmark</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;strings&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkStringConcat</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#a6e22e>x</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;&#34;</span>
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;a&#34;</span>
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkStringBuild</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>buf</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Builder</span>
	<span style=color:#a6e22e>buf</span>.<span style=color:#a6e22e>Reset</span>()
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#a6e22e>buf</span>.<span style=color:#a6e22e>WriteString</span>(<span style=color:#e6db74>&#34;a&#34;</span>)
	}
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ GO111MODULE<span style=color:#f92672>=</span>off go test -bench<span style=color:#f92672>=</span>.
goos: linux
goarch: amd64
cpu: Intel<span style=color:#f92672>(</span>R<span style=color:#f92672>)</span> Core<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> i7-4510U CPU @ 2.00GHz
BenchmarkStringConcat-4           <span style=color:#ae81ff>429110</span>             <span style=color:#ae81ff>38720</span> ns/op
BenchmarkStringBuild-4          <span style=color:#ae81ff>251992339</span>                4.709 ns/op
PASS
ok      command-line-arguments  19.430s
</code></pre></div><h2 id=5-less-loops-high-performance>5. Less loops, high performance</h2><p>Back to the basics, if you have to loop on the string, try to do it as less as possible.</p><h2 id=6-ip-valid-check>6. IP valid check</h2><p>Regex are heavy as said before, use <code>net.ParseIP</code> instead</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>ParseIP</span>(<span style=color:#a6e22e>host</span>)
</code></pre></div><h3 id=benchmark-2>Benchmark</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;net&#34;</span>
	<span style=color:#e6db74>&#34;regexp&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>IpAddress</span> = <span style=color:#e6db74>&#34;192.168.152.32&#34;</span>

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkIPNetParse</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#a6e22e>ip</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>ParseIP</span>(<span style=color:#a6e22e>IpAddress</span>)
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>ip</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;ip not parsed&#34;</span>)
		}
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkIPRegex</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
	<span style=color:#a6e22e>ipv4Pattern</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>`^(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4})`</span>
	<span style=color:#a6e22e>ipv4Regex</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>regexp</span>.<span style=color:#a6e22e>Compile</span>(<span style=color:#a6e22e>ipv4Pattern</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;regex ip not compiled %s&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
	}
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>n</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>n</span><span style=color:#f92672>++</span> {
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matched</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ipv4Regex</span>.<span style=color:#a6e22e>MatchString</span>(<span style=color:#a6e22e>IpAddress</span>); !<span style=color:#a6e22e>matched</span> {
			<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;ip not parsed&#34;</span>)
		}
	}
}

</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ GO111MODULE<span style=color:#f92672>=</span>off go test -bench<span style=color:#f92672>=</span>.
goos: linux
goarch: amd64
cpu: Intel<span style=color:#f92672>(</span>R<span style=color:#f92672>)</span> Core<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> i7-4510U CPU @ 2.00GHz
BenchmarkIPNetParse-4           <span style=color:#ae81ff>16786245</span>                71.35 ns/op
BenchmarkIPRegex-4               <span style=color:#ae81ff>2056546</span>               574.5 ns/op
PASS
ok      _/tmp/golang    4.062s
</code></pre></div></div><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=auto data-full-width-responsive=true data-ad-client=ca-pub-2980078129213070 data-ad-slot></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></section><footer class=post-full-footer><section class=author-card><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author><section class=author-card-content><h4 class=author-card-name><a href=https://omarghader.github.io/>Omar Ghader</a></h4><p>Monitoring, DevOps and SmartHome</p></section></section></footer></article></div></main><aside class="read-next outer"><div class=inner><div class=read-next-feed><article class=read-next-card style=background-image:url(https://omarghader.github.io/img/blog-cover.jpg)><header class=read-next-card-header><small class=read-next-card-header-sitetitle>&mdash; Omar Ghader Blog &mdash;</small><h3 class=read-next-card-header-title><a href=https://omarghader.github.io/tags/go/>#go</a></h3></header><div class=read-next-divider><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg></div><div class=read-next-card-content><ul><li><a href=https://omarghader.github.io/jenkins-nodejs-configuration/>Configuring Node js on Jenkins using docker</a></li><li><a href=https://omarghader.github.io/monitoring-strategy-enterprise/>A Full Guide to Monitoring Strategies for Enterprises</a></li><li><a href=https://omarghader.github.io/esp32-dht22-temperature-humidity-sensor/>Esp32 + 1$ DHT22 temperature sensor</a></li><li><a href=https://omarghader.github.io/detect-http-traffic-anomalies-in-prometheus-using-z-score-based-promql-alerts/>Detect HTTP Traffic Anomalies in Prometheus Using Z-Score-Based PromQL Alerts</a></li></ul></div><footer class=read-next-card-footer><a href=https://omarghader.github.io/tags/go/>See all related posts â†’</a></footer></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/grafana-alerting-custom-message/><div class=post-card-image style=background-image:url(https://upload.wikimedia.org/wikipedia/commons/9/9d/Grafana_logo.png)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/grafana-alerting-custom-message/><header class=post-card-header><span class=post-card-tags>#grafana
#alerting
#prometheus</span><h2 class=post-card-title>Grafana 9 Alert : How to customize alert message</h2></header><section class=post-card-excerpt><p>Create a custom message with metric labels when you receive an alert from grafana with the labels you want to build a clear message</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/><div class=post-card-image style=background-image:url(https://ae01.alicdn.com/kf/H03d7ed37be1649c182ca810a93a8b8cfP/D-tecteur-de-CO2-Portable-pour-la-qualit-de-l-air-connexion-Bluetooth-4-0-capteur.jpg_Q90.jpg_.webp)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/><header class=post-card-header><span class=post-card-tags>#esphome
#esp32
#iot</span><h2 class=post-card-title>Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant</h2></header><section class=post-card-excerpt><p>Setup and connect esp32 to Airbox WP6003 using bluetooth and connect it to home assistant</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article></div></div></aside><div class=floating-header><div class=floating-header-logo><a href=https://omarghader.github.io/><img src=https://omarghader.github.io/img/logo.png alt>
<span></span></a></div><span class=floating-header-divider>&mdash;</span><div class=floating-header-title>Go strings manipulation: Optimize performance x100</div><div class=floating-header-share><div class=floating-header-share-label>Share this<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 15.5V4a1.5 1.5.0 113 0v4.5h2a1 1 0 011 1h2a1 1 0 011 1H18a1.5 1.5.0 011.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2.0 011.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg></div><a class=floating-header-share-tw href="https://twitter.com/share?text=Go%20strings%20manipulation%3a%20Optimize%20performance%20x100&url=https%3a%2f%2fomarghader.github.io%2fgolang-strings-manipulation-optimization-performance%2f" onclick="return window.open(this.href,'share-twitter','width=550,height=235'),!1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class=floating-header-share-fb href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fomarghader.github.io%2fgolang-strings-manipulation-optimization-performance%2f" onclick="return window.open(this.href,'share-facebook','width=580,height=296'),!1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86.0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a></div><progress class=progress value=0><div class=progress-container><span class=progress-bar></span></div></progress></div><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=line-height:1.3em><a href=https://omarghader.github.io/>omarghader</a><br></section><nav class=site-footer-nav><a href=https://omarghader.github.io/>Latest Posts</a>
<a href=https://github.com/omarghader target=_blank rel=noopener>Github</a></nav></div></footer></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script type=text/javascript src=//code.jquery.com/jquery-3.2.1.min.js></script><script type=text/javascript src=https://omarghader.github.io/js/jquery.fitvids.js></script><script>hljs.initHighlightingOnLoad()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SMB08YT14H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-SMB08YT14H')</script><script>$(document).ready(function(){var j=$(".post-full-content"),g,d,e,b,f,c,a;j.fitVids(),g=document.querySelector('progress'),d=document.querySelector('.floating-header'),e=document.querySelector('.post-full-title'),b=window.scrollY,f=window.innerHeight,c=$(document).height(),a=!1;function k(){b=window.scrollY,h()}function l(){f=window.innerHeight,c=$(document).height(),h()}function h(){a||requestAnimationFrame(i),a=!0}function i(){var h=e.getBoundingClientRect().top+window.scrollY,i=e.offsetHeight+35,j=c-f;b>=h+i?d.classList.add('floating-active'):d.classList.remove('floating-active'),g.setAttribute('max',j),g.setAttribute('value',b),a=!1}window.addEventListener('scroll',k,{passive:!0}),window.addEventListener('resize',l,!1),i()})</script></body></html>