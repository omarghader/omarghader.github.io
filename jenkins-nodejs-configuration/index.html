<!doctype html><html lang=en-us><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=keywords content><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/omarghader.github.io\/"},"articleSection":"post","name":"Configuring Node js on Jenkins using docker","headline":"Configuring Node js on Jenkins using docker","description":" Installing jenkins from scratch and configuring Nodejs ","inLanguage":"en-US","author":"Omar Ghader","creator":"Omar Ghader","publisher":"Omar Ghader","accountablePerson":"map[]","copyrightHolder":"map[]","copyrightYear":"2018","datePublished":"2018-08-22T00:00:00Z","dateModified":"2018-08-22T00:00:00Z","url":"https:\/\/omarghader.github.io\/jenkins-nodejs-configuration\/","wordCount":"315","image":"https:\/\/omarghader.github.io\//img/logo.png","keywords":["jenkins","node","nodejs","npmrc","docker","jenkins_nodejs","Blog"]}</script><title>Configuring Node js on Jenkins using docker &#183;</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://omarghader.github.io/favicon.ico><link rel=canonical href=https://omarghader.github.io/jenkins-nodejs-configuration/><meta name=description content="Installing jenkins from scratch and configuring Nodejs"><meta name=twitter:card content="summary"><meta name=twitter:title content="Configuring Node js on Jenkins using docker"><meta name=twitter:description content="Installing jenkins from scratch and configuring Nodejs"><meta name=twitter:url content="https://omarghader.github.io/jenkins-nodejs-configuration/"><meta name=twitter:site content="@"><meta property="og:site_name" content><meta property="og:title" content="Configuring Node js on Jenkins using docker &#183; Omar Ghaders Blog"><meta property="og:url" content="https://omarghader.github.io/jenkins-nodejs-configuration/"><meta property="og:type" content="article"><meta property="og:description" content="Installing jenkins from scratch and configuring Nodejs"><meta property="article:published_time" content="2018-08-22T00:00:00Z"><meta property="article:tag" content="jenkins"><meta property="article:tag" content="node"><meta property="article:tag" content="nodejs"><meta property="article:tag" content="npmrc"><meta property="article:tag" content="docker"><meta property="article:tag" content="jenkins_nodejs"><meta property="og:image" content="https://omarghader.github.io/img/blog-cover.jpg"><meta name=generator content="Hugo 0.69.0"><link rel=stylesheet type=text/css href=https://omarghader.github.io/built/screen.css><link rel=stylesheet type=text/css href=https://omarghader.github.io/css/casper-two.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://omarghader.github.io/css/custom.css></head><body class=ctsingle><div class=site-wrapper><header class="site-header outer" style=background-image:url(https://omarghader.github.io/img/blog-cover.jpg)><div class=inner><div class=site-header-content><h1 class=site-title><img class=site-logo src=https://omarghader.github.io/img/logo.png alt="Omar Ghaders Blog"></h1><h2 class=site-description>A blog for web development tutorial</h2></div><nav class=site-nav><div class=site-nav-left><ul class=nav role=menu><li role=menuitem><a href=https://omarghader.github.io/>Home</a></li><li role=menuitem><a href=https://omarghader.github.io/post>Posts</a></li><li role=menuitem><a href=https://omarghader.github.io/about>About</a></li></ul></div><div class=site-nav-right><div class=social-links><a class=social-link href=https://github.com/omarghader target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></nav></div></header><main id=site-main class="site-main outer" role=main><div class=inner><div class=post-feed><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/jenkins-nodejs-configuration/><div class=post-card-image style=background-image:url(https://omarghader.github.io/defimg/4.jpg)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/jenkins-nodejs-configuration/><header class=post-card-header><span class=post-card-tags>#jenkins
#node
#nodejs
#npmrc
#docker
#jenkins_nodejs</span><h2 class=post-card-title>Configuring Node js on Jenkins using docker</h2></header></a><section class=post-card-excerpt style="padding:0 25px"><p>Jenkins is a devops tool for continuous intergration.</p><h2 id=install-jenkins>Install jenkins</h2><p>Requirements for this tutorial :</p><ul><li>Docker</li><li>Docker compose</li></ul><p>We will user docker compose to configure jenkins docker container:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>version</span>: <span style=color:#e6db74>&#39;3.5&#39;</span>

<span style=color:#66d9ef>services</span>:
  <span style=color:#66d9ef>jenkins</span>:
    <span style=color:#66d9ef>image</span>: <span style=color:#e6db74>&#39;jenkins/jenkins:lts&#39;</span>
    <span style=color:#66d9ef>container_name</span>: <span style=color:#e6db74>&#39;jenkins&#39;</span>
    <span style=color:#66d9ef>restart</span>: always
    <span style=color:#66d9ef>ports</span>:
      - <span style=color:#e6db74>&#39;8080:8080&#39;</span>
      - <span style=color:#e6db74>&#39;50000:50000&#39;</span>
    <span style=color:#66d9ef>volumes</span>:
      - jenkins-data:/etc/gitlab
      - /var/run/docker.sock:/var/run/docker.sock

<span style=color:#66d9ef>volumes</span>:
  <span style=color:#66d9ef>jenkins-data</span>:
    <span style=color:#66d9ef>name</span>: jenkins-data

</code></pre></div><p>Then, run the command :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ docker-compose up -d
</code></pre></div><h2 id=run-jenkins>Run Jenkins</h2><p>Once you had run the docker compose file, test that your jenkins is running by opening this url on your browser <a href=http://localhost:8080>http://localhost:8080</a></p><h2 id=install-nodejs-plugin>Install NodeJS Plugin</h2><p>When jenkins is ready, go to &ldquo;Manage Jenkins&rdquo; => &ldquo;Manage Plugins&rdquo; and Install NodeJs Plugin and NPM Plugin.</p><p>Later, go to &ldquo;Manage Jenkins&rdquo; => &ldquo;Global Tool configuration&rdquo;, go down to NodeJS and choose the version you want to use.
<strong>Dont forget to check the &ldquo;automatic installation&rdquo; checkbox.</strong></p><p><strong>Important</strong>: At this point, node and npm are not installed yet.
In order to install them:</p><ul><li>create a &ldquo;Freestyle project&rdquo;</li><li>In the project configuration page: Check the box &ldquo;Provide Node & npm bin/ folder to PATH&rdquo;, and choose the version of node you want.</li><li>In the project configuration page: In the &ldquo;Build&rdquo; part, click &ldquo;a shell script&rdquo; and add the command &ldquo;node -v&rdquo;</li><li>Run the project</li></ul><p>If node is installed, the jenkins job will pass and you will see in the console output: &ldquo;vXX.XX.XX&rdquo;</p><h2 id=configuring-npmrc-optional>Configuring NPMRC Optional</h2><p>You can add your npm settings from jenkins.
Go to &ldquo;Manage Jenkins&rdquo; => &ldquo;Managed Files&rdquo; => choose npmrc and set your configuration</p><h2 id=set-a-variable-environment>Set A Variable environment</h2><p>Previously, Nodejs have been installed. But, the installation was not global.
In order to make nodejs accessible for all jobs, we should add an Environment Variable for the job runner.
Go to &ldquo;Manage Jenkins&rdquo; => &ldquo;Manage Nodes&rdquo; => For all the nodes, add this environment :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>PATH<span style=color:#f92672>=</span>$PATH:/var/jenkins_home/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/node/bin
</code></pre></div><h2 id=test-your-own-code>Test your own code</h2><p>Now that you have configured nodejs, create a new project with a jenkinsfile and run it.</p><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=auto data-full-width-responsive=true data-ad-client=ca-pub-2980078129213070 data-ad-slot=1658997746></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></section><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article></div><nav class=pagination role=navigation><a class=newer-posts href=https://omarghader.github.io/monitor-your-applications-easily-with-grafana-and-prometheus/>&larr; <span class=hide>Next Post</span></a>
<span class=page-number>&nbsp;</span>
<a class=older-posts href=https://omarghader.github.io/docker-compose-tutorial/><span class=hide>Previous Post</span> &rarr;</a></nav><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https:\/\/omarghader.github.io\/jenkins-nodejs-configuration\/";this.page.identifier="https:\/\/omarghader.github.io\/jenkins-nodejs-configuration\/";};(function(){var d=document,s=d.createElement('script');s.src='https://omarghader.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=line-height:1.3em><a href=https://omarghader.github.io/>omarghader</a><br></section><nav class=site-footer-nav><a href=https://omarghader.github.io/>Latest Posts</a>
<a href=https://github.com/omarghader target=_blank rel=noopener>Github</a></nav></div></footer></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script type=text/javascript src=//code.jquery.com/jquery-3.2.1.min.js></script><script type=text/javascript src=https://omarghader.github.io/js/jquery.fitvids.js></script><script>hljs.initHighlightingOnLoad();</script><script>var _gaq=[['_setAccount','UA-66637295-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'));</script></body></html>