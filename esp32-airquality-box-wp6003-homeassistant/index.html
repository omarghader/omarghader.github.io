<!doctype html><html lang=en-us><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/omarghader.github.io\/"},"articleSection":"post","name":"Cheap 15$ Air quality monitor: ESP32, Bluetooth \u0026 Home assistant","headline":"Cheap 15$ Air quality monitor: ESP32, Bluetooth \u0026 Home assistant","description":" Setup and connect esp32 to Airbox WP6003 using bluetooth and connect it to home assistant ","inLanguage":"en-US","author":"Omar Ghader","creator":"Omar Ghader","publisher":"Omar Ghader","accountablePerson":"map[]","copyrightHolder":"map[]","copyrightYear":"2022","datePublished":"2022-02-22T08:57:23+02:00","dateModified":"2022-02-22T08:57:23+02:00","url":"https:\/\/omarghader.github.io\/esp32-airquality-box-wp6003-homeassistant\/","wordCount":"756","image":"https:\/\/omarghader.github.io\//img/logo.png","keywords":["esphome","esp32","wp6003","air quality","iot","esp32 esphome","esphome projects","esp32 co2","esp32 home assistant","home assistant","airquality co2","bluetooth co2 monitor","esp32 pir","esp32 home asistant","esphome home assistant configuration","home assistant docker","hass","esphome","esp32","wp6003","air quality","iot","esp32 esphome","esphome projects","esp32 co2","esp32 home assistant","home assistant","airquality co2","bluetooth co2 monitor","esp32 pir","esp32 home asistant","esphome home assistant configuration","home assistant docker","hass","Blog"]}</script><title>Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant &#183;</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://omarghader.github.io/favicon.ico><link rel=canonical href=https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/><meta name=description content="Setup and connect esp32 to Airbox WP6003 using bluetooth and connect it to home assistant"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ae01.alicdn.com/kf/H03d7ed37be1649c182ca810a93a8b8cfP/D-tecteur-de-CO2-Portable-pour-la-qualit-de-l-air-connexion-Bluetooth-4-0-capteur.jpg_Q90.jpg_.webp"><meta name=twitter:title content="Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant"><meta name=twitter:description content="Setup and connect esp32 to Airbox WP6003 using bluetooth and connect it to home assistant"><meta name=twitter:url content="https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/"><meta name=twitter:site content="@"><meta property="og:site_name" content><meta property="og:title" content="Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant &#183; Omar Ghader Blog"><meta property="og:url" content="https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/"><meta property="og:type" content="article"><meta property="og:description" content="Setup and connect esp32 to Airbox WP6003 using bluetooth and connect it to home assistant"><meta property="article:published_time" content="2022-02-22T08:57:23+02:00"><meta property="article:tag" content="esphome"><meta property="article:tag" content="esp32"><meta property="article:tag" content="wp6003"><meta property="article:tag" content="air quality"><meta property="article:tag" content="iot"><meta property="article:tag" content="esp32 esphome"><meta property="article:tag" content="esphome projects"><meta property="article:tag" content="esp32 co2"><meta property="article:tag" content="esp32 home assistant"><meta property="article:tag" content="home assistant"><meta property="article:tag" content="airquality co2"><meta property="article:tag" content="bluetooth co2 monitor"><meta property="article:tag" content="esp32 pir"><meta property="article:tag" content="esp32 home asistant"><meta property="article:tag" content="esphome home assistant configuration"><meta property="article:tag" content="home assistant docker"><meta property="article:tag" content="hass"><meta property="og:image" content="https://ae01.alicdn.com/kf/H03d7ed37be1649c182ca810a93a8b8cfP/D-tecteur-de-CO2-Portable-pour-la-qualit-de-l-air-connexion-Bluetooth-4-0-capteur.jpg_Q90.jpg_.webp"><meta name=generator content="Hugo 0.102.0-DEV"><link rel=stylesheet type=text/css href=https://omarghader.github.io/built/screen.css><link rel=stylesheet type=text/css href=https://omarghader.github.io/css/casper-two.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://omarghader.github.io/css/custom.css></head><body class=post-template><div class=site-wrapper><header class="site-header outer"><div class=inner><nav class=site-nav><div class=site-nav-left><a class=site-nav-logo href=#><img src=https://omarghader.github.io/img/logo.png alt="Omar Ghader Blog"></a><ul class=nav role=menu><li role=menuitem><a href=https://omarghader.github.io/>Home</a></li><li role=menuitem><a href=https://omarghader.github.io/post>Posts</a></li><li role=menuitem><a href=https://omarghader.github.io/about>About</a></li></ul></div><div class=site-nav-right><div class=social-links><a class=social-link href=https://github.com/omarghader target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></nav></div></header><main id=site-main class="site-main outer" role=main><div class=inner><article class="post-full post"><header class=post-full-header><section class=post-full-meta><time class=post-full-meta-date datetime=2022-02-22>22 February 2022</time>
<span class=date-divider>/</span> <a href=https://omarghader.github.io/tags/esphome/>#esphome</a>&nbsp;<a href=https://omarghader.github.io/tags/esp32/>#esp32</a>&nbsp;</section><h1 class=post-full-title>Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant</h1></header><figure class=post-full-image style=background-image:url(https://ae01.alicdn.com/kf/H03d7ed37be1649c182ca810a93a8b8cfP/D-tecteur-de-CO2-Portable-pour-la-qualit-de-l-air-connexion-Bluetooth-4-0-capteur.jpg_Q90.jpg_.webp)></figure><section class=post-full-content><div class=kg-card-markdown><p>If you are a DIY lover, the first sensors you look at are : temperature sensor and airquality sensor. #Metoo.</p><p>I have started with the temperature sensor in <a href=https://omarghader.github.io/how-to-monitor-your-home-temperature-with-esp32-and-xiaomi-mijia-using-esphome/>this article</a> and found that amazing. I decided to go try the airquality monitoring.</p><p>I wanted something cheap, and ideally with bluetooth to connect it easily to my ESP32 and Home assistant, I found that Airbox WP6003 can do the job.</p><h2 id=requirements>Requirements:</h2><p><em>Aliexpress:</em></p><ul><li>ESP32-DevKitC board : <a onclick='gtag("event","aliexpress",{event_category:"click",event_label:"esp32"})' href=https://s.click.aliexpress.com/e/_ADRskV target=_blank>Buy here from aliexpress</a></li><li>Airbox WP6003 Bluetooth : <a onclick='gtag("event","aliexpress",{event_category:"click",event_label:"airbox"})' href=https://s.click.aliexpress.com/e/_AMEXyX target=_blank>Buy here from aliexpress</a></li></ul><p><em>Amazon</em>:</p><ul><li>ESP32-DevKitC board <a onclick='gtag("event","amazon",{event_category:"click",event_label:"esp32"})' href=https://fij.li/esp32 target=_blank>Buy from amazon</a></li><li>Airbox WP6003 Bluetooth : <a onclick='gtag("event","amazon",{event_category:"click",event_label:"airbox"})' href=https://fij.li/airquality-wp6003 target=_blank>Buy here from amazon</a></li></ul><h2 id=collecting-information>Collecting information</h2><p>BLE devices normally has characteristics that can be access using an ID. These characteristics contains the data. This is the easiest way.</p><p>However some manufacturers have decided to make it more complicated and to not store this information in a characteristic. <code>The data is sent using a notification only</code>. This is the case for WP6003.</p><p>To see what I am talking about, execute the following command on your linux shell:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ gatttool -I -b XX:XX:XX:XX:XX:XX
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>XX:XX:XX:XX:XX:XX<span style=color:#f92672>]</span> connect
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># you should be connected now to the airbox</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#75715e># wait some minutes... A notification should appear</span>
</span></span><span style=display:flex><span>Notification handle <span style=color:#f92672>=</span> 0x0012 value: 0a <span style=color:#ae81ff>16</span> <span style=color:#ae81ff>02</span> 0e 0d 2d <span style=color:#ae81ff>00</span> c3 <span style=color:#ae81ff>58</span> <span style=color:#ae81ff>02</span> <span style=color:#ae81ff>03</span> <span style=color:#ae81ff>39</span> <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>83</span> <span style=color:#ae81ff>01</span> <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>02</span> dc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># If you don&#39;t want to wait, execute the commands below to receive the data instantly</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>XX:XX:XX:XX:XX:XX<span style=color:#f92672>][</span>LE<span style=color:#f92672>]</span>&gt; char-write-req 0x0013 <span style=color:#ae81ff>0100</span>
</span></span><span style=display:flex><span>Characteristic value was written successfully
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>XX:XX:XX:XX:XX:XX<span style=color:#f92672>][</span>LE<span style=color:#f92672>]</span>&gt; char-write-cmd 0x0010 aa15031a000935
</span></span><span style=display:flex><span>Notification handle <span style=color:#f92672>=</span> 0x0012 value: aa <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>03</span> 1a <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>09</span> <span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>XX:XX:XX:XX:XX:XX<span style=color:#f92672>][</span>LE<span style=color:#f92672>]</span>&gt; char-write-cmd 0x0010 ab
</span></span><span style=display:flex><span>Notification handle <span style=color:#f92672>=</span> 0x0012 value: 0a <span style=color:#ae81ff>16</span> <span style=color:#ae81ff>02</span> 0e 0d 2d <span style=color:#ae81ff>00</span> c3 <span style=color:#ae81ff>58</span> <span style=color:#ae81ff>02</span> <span style=color:#ae81ff>03</span> <span style=color:#ae81ff>39</span> <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>83</span> <span style=color:#ae81ff>01</span> <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>02</span> dc
</span></span></code></pre></div><blockquote><p>Receive my latest articles by <strong>subscribing</strong> to my mailing list <a href=http://eepurl.com/h6jxnr>http://eepurl.com/h6jxnr</a></p></blockquote><h1 id=decoding-the-information>Decoding the information</h1><p>Alright, we have all we want :) NOOOO ! It is not that easy because you should to figure out where are the 4 data we are looking for:</p><ul><li>CO2</li><li>HCHO</li><li>TVOC</li><li>TEMPERATURE</li></ul><p>I know that for the notification above, I had the following values on my application:</p><pre tabindex=0><code>co2 : 582         =&gt; we should look for 582 =&gt; HEX : 0x0246
temperature 19.5  =&gt; we should look for 195 =&gt; HEX : 0xc3
hcho: 0.116       =&gt; we should look for 116 =&gt; HEX : 0x83
tvoc: 0.825       =&gt; we should look for 825 =&gt; HEX : 0x0339
</code></pre><p>By comparing the notification data and the data above, we can understand that:</p><pre tabindex=0><code>Notification handle = 0x0012 value: 0a 16 02 0e 0d 2d 00 c3 58 02 03 39 00 83 01 00 02 dc
                                                         19.5       825   116         732 - (150)
                                                         temp       tvoc   hcho
</code></pre><h2 id=receive-data-in-esphome>Receive data in ESPHOME</h2><p>Esphome had recently an update to receive the notification. This update will provide us the byte array as received by the device.</p><p>All we should do is to parse the data and extract the values from the byte array and set the data as a sensor value.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>esphome</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>livingroom</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>ESP32</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>board</span>: <span style=color:#ae81ff>esp32doit-devkit-v1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>wifi</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ssid</span>: !<span style=color:#ae81ff>secret wifi_ssid</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>password</span>: !<span style=color:#ae81ff>secret wifi_password</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable logging</span>
</span></span><span style=display:flex><span><span style=color:#f92672>logger</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable Home Assistant API</span>
</span></span><span style=display:flex><span><span style=color:#f92672>api</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>web_server</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>ota</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>time</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>homeassistant</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>homeassistant_time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Example configuration entry</span>
</span></span><span style=display:flex><span><span style=color:#f92672>switch</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>restart</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Living Room Restart&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable Bluetooth scanning for this ESP32</span>
</span></span><span style=display:flex><span><span style=color:#f92672>esp32_ble_tracker</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># CHANGE mac_address to your airquality box wp6003</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ble_client</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>mac_address</span>: <span style=color:#ae81ff>XX:XX:XX:XX:XX:XX</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>airquality</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>sensor</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Xiaomei temperature&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>xiaomei_temperature</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>device_class</span>: <span style=color:#e6db74>&#34;temperature&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>state_class</span>: <span style=color:#e6db74>&#34;measurement&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>unit_of_measurement</span>: <span style=color:#e6db74>&#34;°C&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;CO2&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>xiaomei_co2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>device_class</span>: <span style=color:#e6db74>&#34;carbon_dioxide&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>state_class</span>: <span style=color:#e6db74>&#34;measurement&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>unit_of_measurement</span>: <span style=color:#e6db74>&#34;ppm&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;TVOC&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>xiaomei_tvoc</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>state_class</span>: <span style=color:#e6db74>&#34;measurement&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>unit_of_measurement</span>: <span style=color:#e6db74>&#34;mg/m3&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;HCHO&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>xiaomei_hcho</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>state_class</span>: <span style=color:#e6db74>&#34;measurement&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>unit_of_measurement</span>: <span style=color:#e6db74>&#34;mg/m3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>ble_client</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ble_client_id</span>: <span style=color:#ae81ff>airquality</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Airquality level&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>service_uuid</span>: <span style=color:#e6db74>&#34;fff0&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>characteristic_uuid</span>: <span style=color:#e6db74>&#34;fff4&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#e6db74>&#34;mdi:air&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>update_interval</span>: <span style=color:#ae81ff>never</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>notify</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>lambda</span>: |-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      uint8_t* pdata = (uint8_t*) x.data();
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      float temperature =  float(pdata[7])/10;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      float tvoc =  float((pdata[10] &lt;&lt; 8) + pdata[11]) / 1000;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      float hcho =  float((pdata[12] &lt;&lt; 8) + pdata[13]) / 1000;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      float co2 =  (pdata[16] &lt;&lt; 8) + pdata[17] - 150;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      id(xiaomei_temperature).publish_state(temperature);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      id(xiaomei_hcho).publish_state(hcho);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      id(xiaomei_tvoc).publish_state(tvoc);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      id(xiaomei_co2).publish_state(co2);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      return (float)x.size();</span>      
</span></span></code></pre></div><p>Flash the esp32 with the above configuration</p><h2 id=connect-esphome-to-home-assistant>Connect ESPHome to Home assistant</h2><p>Now that your esp32 is ready and connected to the airquality wp6003 box, connect the esp32 to home assistant if it&rsquo;s not connected yet.</p><p>Refer to <a href=https://omarghader.github.io/how-to-connect-esp32-esphome-to-home-assistant/>this article</a> if you want to connect it.</p><h2 id=home-assistant-demo>Home assistant Demo</h2><p>Now that your home assistant is connected and collecting the air info from the ESP32 and WP6003 box, you can create a card in your dashboard as I do.</p><p><img src=https://omarghader.github.io/img/wp6003-esp32-homeassistant.jpg alt="Airquality VSON WP6003 esp32 home assistant"></p></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2447779430876036" crossorigin=anonymous></script></section><footer class=post-full-footer><section class=author-card><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author><section class=author-card-content><h4 class=author-card-name><a href=https://omarghader.github.io/>Omar Ghader</a></h4><p>Fullstack web engineer and devops. Mobile web specialist</p></section></section></footer></article><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/",this.page.identifier="https://omarghader.github.io/esp32-airquality-box-wp6003-homeassistant/"};(function(){var e=document,t=e.createElement("script");t.src="https://omarghader.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><aside class="read-next outer"><div class=inner><div class=read-next-feed><article class=read-next-card style=background-image:url(https://omarghader.github.io/img/blog-cover.jpg)><header class=read-next-card-header><small class=read-next-card-header-sitetitle>&mdash; Omar Ghader Blog &mdash;</small><h3 class=read-next-card-header-title><a href=https://omarghader.github.io/tags/esphome/>#esphome</a></h3></header><div class=read-next-divider><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg></div><div class=read-next-card-content><ul><li><a href=https://omarghader.github.io/esp32-am312-pir-motion-sensor/>ESP32 AM312 motion sensor automation</a></li><li><a href=https://omarghader.github.io/esp32-cam-tutorial/>ESP32 cam tutorial: Setup 5$ live streaming camera for you house with esphome</a></li><li><a href=https://omarghader.github.io/how-to-monitor-your-home-temperature-with-esp32-and-xiaomi-mijia-using-esphome/>Esphome Tutorial: for 4$ monitor your home temperature with esp32 and xiaomi mijia</a></li><li><a href=https://omarghader.github.io/call-r-from-java-using-jri-library/>Call R From Java Using JRI Library</a></li></ul></div><footer class=read-next-card-footer><a href=https://omarghader.github.io/tags/esphome/>See all related posts →</a></footer></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/best-short-url-generator/><div class=post-card-image style=background-image:url(https://fij.li/assets/globe_location.png)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/best-short-url-generator/><header class=post-card-header><span class=post-card-tags>#shorturl
#shortlink
#short url
#short url generator
#shortlink generator
#geo short url
#location redirect</span><h2 class=post-card-title>Best 4 short url generators comparison</h2></header><section class=post-card-excerpt><p>Check the best short link generator for 2022 and compare them</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article><article class="post-card post"><a class=post-card-image-link href=https://omarghader.github.io/esp32-am312-pir-motion-sensor/><div class=post-card-image style=background-image:url(https://omarghader.github.io/img/am312-pins.webp)></div></a><div class=post-card-content><a class=post-card-content-link href=https://omarghader.github.io/esp32-am312-pir-motion-sensor/><header class=post-card-header><span class=post-card-tags>#esphome
#esp32
#am312
#iot
#esp32 esphome
#esphome projects
#esp32 am312
#esp32 home assistant
#home assistant
#pir
#motion sensor
#esp32 pir
#esp32 home asistant
#esphome home assistant configuration
#home assistant docker
#hass</span><h2 class=post-card-title>ESP32 AM312 motion sensor automation</h2></header><section class=post-card-excerpt><p>Setup and connect esp32 to am312 motion sensor pir and create an automation to turn on/off the light using Home assistant</p></section></a><footer class=post-card-meta><img class=author-profile-image src=https://omarghader.github.io/img/me/omar.jpg alt=Author>
<span class=post-card-author><a href=https://omarghader.github.io/>Omar Ghader</a></span></footer></div></article></div></div></aside><div class=floating-header><div class=floating-header-logo><a href=https://omarghader.github.io/><img src=https://omarghader.github.io/img/logo.png alt>
<span></span></a></div><span class=floating-header-divider>&mdash;</span><div class=floating-header-title>Cheap 15$ Air quality monitor: ESP32, Bluetooth & Home assistant</div><div class=floating-header-share><div class=floating-header-share-label>Share this<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 15.5V4a1.5 1.5.0 113 0v4.5h2a1 1 0 011 1h2a1 1 0 011 1H18a1.5 1.5.0 011.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2.0 011.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg></div><a class=floating-header-share-tw href="https://twitter.com/share?text=Cheap%2015%24%20Air%20quality%20monitor%3a%20ESP32%2c%20Bluetooth%20%26%20Home%20assistant&url=https%3a%2f%2fomarghader.github.io%2fesp32-airquality-box-wp6003-homeassistant%2f" onclick='return window.open(this.href,"share-twitter","width=550,height=235"),!1'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class=floating-header-share-fb href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fomarghader.github.io%2fesp32-airquality-box-wp6003-homeassistant%2f" onclick='return window.open(this.href,"share-facebook","width=580,height=296"),!1'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86.0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a></div><progress class=progress value=0><div class=progress-container><span class=progress-bar></span></div></progress></div><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=line-height:1.3em><a href=https://omarghader.github.io/>omarghader</a><br></section><nav class=site-footer-nav><a href=https://omarghader.github.io/>Latest Posts</a>
<a href=https://github.com/omarghader target=_blank rel=noopener>Github</a></nav></div></footer></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script>
<script type=text/javascript src=//code.jquery.com/jquery-3.2.1.min.js></script>
<script type=text/javascript src=https://omarghader.github.io/js/jquery.fitvids.js></script>
<script>hljs.initHighlightingOnLoad()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SMB08YT14H"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SMB08YT14H")</script><script id=mcjs>!function(e,t,n,s,o){s=e.createElement(t),o=e.getElementsByTagName(t)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/94ca789ac000ba7e7e094679d/b7fa1f1c8a3dfe1a1da4bfd89.js")</script><script>$(document).ready(function(){var e,t,n,s,o,i,a,l=$(".post-full-content");l.fitVids(),a=document.querySelector("progress"),s=document.querySelector(".floating-header"),o=document.querySelector(".post-full-title"),t=window.scrollY,i=window.innerHeight,n=$(document).height(),e=!1;function d(){t=window.scrollY,r()}function u(){i=window.innerHeight,n=$(document).height(),r()}function r(){e||requestAnimationFrame(c),e=!0}function c(){var r=o.getBoundingClientRect().top+window.scrollY,c=o.offsetHeight+35,l=n-i;t>=r+c?s.classList.add("floating-active"):s.classList.remove("floating-active"),a.setAttribute("max",l),a.setAttribute("value",t),e=!1}window.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",u,!1),c()})</script></body></html>